!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r=function(){var e=/^[a-z][a-z0-9+.-]*:/i,t=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,n=/(?:^|\/)\.\.?(?:$|[\/#?])/;const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i="http://www.w3.org/2001/XMLSchema#string";function s(e){if(!n.test(e))return e;for(var t="",r=e.length,i=-1,s=-1,a=0,o="/";i<r;){switch(o){case":":if(s<0&&"/"===e[++i]&&"/"===e[++i])for(;(s=i+1)<r&&"/"!==e[s];)i=s;break;case"?":case"#":i=r;break;case"/":if("."===e[i+1])switch(o=e[1+ ++i]){case"/":t+=e.substring(a,i-1),a=i+1;break;case void 0:case"?":case"#":return t+e.substring(a,i)+e.substr(i+1);case".":if(void 0===(o=e[1+ ++i])||"/"===o||"?"===o||"#"===o){if((a=(t+=e.substring(a,i-2)).lastIndexOf("/"))>=s&&(t=t.substr(0,a)),"/"!==o)return t+"/"+e.substr(i+1);a=i+1}}}o=e[++i]}return t+e.substring(a)}function a(e){switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":return'"'+e.value+'"'+(e.datatypeString===r?"@"+e.language:e.datatypeString===i?"":"^^"+e.datatypeString);default:throw Error("unknown RDFJS node type: "+JSON.stringify(e))}}function o(e,t){if(u(e))return t.namedNode(e);if(c(e))return t.blankNode(e.substr(2));if(p(e)){let n=f(e)||(h(e)===i?null:t.namedNode(h(e)));return t.literal(l(e),n)}throw Error("Unknown internal term type: "+JSON.stringify(e))}function u(e){if("string"!=typeof e)return!1;if(0===e.length)return!0;var t=e[0];return'"'!==t&&"_"!==t}function p(e){return"string"==typeof e&&'"'===e[0]}function c(e){return"string"==typeof e&&"_:"===e.substr(0,2)}function l(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function h(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?r:i)}function f(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""}var d=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,g={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function m(e){var t=g[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}return{RdfLangString:r,XsdString:i,resolveRelativeIRI:function(n,r){if(e.test(r))return r;switch(r[0]){case void 0:return n;case"#":return n+r;case"?":return n.replace(/(?:\?.*)?$/,r);case"/":let e=n.match(t);return("/"===r[1]?e[1]:e[0])+s(r);default:return s(n.replace(/[^\/?]*(?:\?.*)?$/,"")+r)}},isIRI:u,isLiteral:p,isBlank:c,isDefaultGraph:function(e){return!e},inDefaultGraph:function(e){return!e.graph},getLiteralValue:l,getLiteralType:h,getLiteralLanguage:f,internalTerm:a,internalTriple:function(e){return{subject:a(e.subject),predicate:a(e.predicate),object:a(e.object)}},externalTerm:o,externalTriple:function(e,t){return t.quad(o(e.subject,t),o(e.predicate,t),o(e.object,t))},intermalTermToTurtle:function(e,t,n){if(u(e)){d.test(e)&&(e=e.replace(v,m));var r=Object.keys(n).find(t=>e.startsWith(n[t]));if(r){var i=e.substr(n[r].length);if(-1===i.indexOf("\\"))return r+":"+i.replace(/([~!$&'()*+,;=/?#@%])/g,"\\$1")}return e.startsWith(t)?"<"+e.substr(t.length)+">":"<"+e+">"}if(c(e))return e;if(p(e)){var s=l(e),a=h(e),o=f(e);return d.test(s)&&(s=s.replace(v,m)),o?'"'+s+'"@'+o:a?'"'+s+'"^^'+this._encodeIriOrBlankNode(a):'"'+s+'"'}throw Error("Unknown internal term type: "+JSON.stringify(e))}}}();e.exports=r},function(e,t,n){const r=n(2);console.warn(r)},function(e,t,n){(function(t){var r=function(){var e={term:"START"},r="VERBOSE"in t.env,i=n(0);let s=n(4);function a(e){return i.isIRI(e)?e:i.isLiteral(e)?i.getLiteralValue(e):e.substr(2)}var o="http://www.w3.org/2001/XMLSchema#",u=[o+"integer",o+"nonPositiveInteger",o+"negativeInteger",o+"long",o+"int",o+"short",o+"byte",o+"nonNegativeInteger",o+"unsignedLong",o+"unsignedInt",o+"unsignedShort",o+"unsignedByte",o+"positiveInteger"],p=[o+"decimal"].concat(u),c=[o+"float",o+"double"].concat(p),l={"http://www.w3.org/2001/XMLSchema#integer":function(e,t){return e.match(/^[+-]?[0-9]+$/)||t("illegal integer value '"+e+"'"),parseInt(e)},"http://www.w3.org/2001/XMLSchema#decimal":function(e,t){return e.match(/^[+-]?(?:[0-9]*\.[0-9]+|[0-9]+)$/)||t("illegal decimal value '"+e+"'"),parseFloat(e)}};const h=/^[+\-]?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[eE][+\-]?[0-9]+)?$/;l[o+"float"]=function(e,t){return"NaN"===e?NaN:"INF"===e?1/0:"-INF"===e?-1/0:(e.match(h)||t("illegal float value '"+e+"'"),parseFloat(e))},l[o+"double"]=function(e,t){return"NaN"===e?NaN:"INF"===e?1/0:"-INF"===e?-1/0:(e.match(h)||t("illegal double value '"+e+"'"),Number(e))},testRange=function(e,t,n){var r={integer:{min:-1/0,max:1/0},decimal:{min:-1/0,max:1/0},float:{min:-1/0,max:1/0},double:{min:-1/0,max:1/0},nonPositiveInteger:{min:-1/0,max:0},negativeInteger:{min:-1/0,max:-1},long:{min:-0x8000000000000000,max:0x8000000000000000},int:{min:-2147483648,max:2147483647},short:{min:-32768,max:32767},byte:{min:-128,max:127},nonNegativeInteger:{min:0,max:1/0},unsignedLong:{min:0,max:0x10000000000000000},unsignedInt:{min:0,max:4294967295},unsignedShort:{min:0,max:65535},unsignedByte:{min:0,max:255},positiveInteger:{min:1,max:1/0}}[t.substr(o.length)];if(!r)throw Error("unexpected datatype: "+t);e<r.min?n('"'+e+'"^^<'+t+"> is less than the min:",r.min):e>r.max&&n('"'+e+'"^^<'+t+"> is greater than the max:",r.min)};var f={length:function(e,t){return e.length===t},minlength:function(e,t){return e.length>=t},maxlength:function(e,t){return e.length<=t}},d={mininclusive:function(e,t){return e>=t},minexclusive:function(e,t){return e>t},maxinclusive:function(e,t){return e<=t},maxexclusive:function(e,t){return e<t}},v={totaldigits:function(e,t){var n=e.match(/[0-9]/g);return n&&n.length<=t},fractiondigits:function(e,t){var n=e.match(/^[+-]?[0-9]*\.?([0-9]*)$/);return n&&n[1].length<=t}};function g(e){if('"'!==e[0])return e;var t={value:i.getLiteralValue(e)},n=i.getLiteralType(e);n&&"http://www.w3.org/2001/XMLSchema#string"!==n&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==n&&(t.type=n);var r=i.getLiteralLanguage(e);return r&&(t.language=r),t}function m(e){return"object"!=typeof e||"value"in e&&Object.keys(e).reduce((e,t)=>!1===e?e:-1!==["value","type","language"].indexOf(t),!0)}function y(e,t,n){function r(){this.type="Epsilon"}function i(e,t,n,r,i){this.type="TripleConstraint",this.inverse=!!n,this.negated=!!r,this.predicate=t,void 0!==i&&(this.valueExpr=i)}function s(e){this.type="Choice",this.disjuncts=e}function a(e){this.type="EachOf",this.conjuncts=e}function o(e,t){this.type="SemActs",this.expression=e,this.semActs=t}function u(e){this.type="KleeneStar",this.expression=e}return e?function e(n,p){var c;function l(e,t,n){if(void 0===t&&(t=1),void 0===n&&(n=1),1===t&&1===n)return e;var i=-1===n?new u(e):b(n-t).reduce((function(t,n,i){return new s(0===i?[e,new r]:[new a([e,t]),new r])}),void 0);return 0!==t?new a(b(t).map((function(t){return e})).concat(i)):i}if("string"==typeof n)return e(p._index.tripleExprs[n].expression,p);if("TripleConstraint"===n.type){var h="valueExprRef"in n?p.valueExprDefns[n.valueExprRef]:n.valueExpr;return c=l(new i(t.push(n)-1,n.predicate,n.inverse,n.negated,h),n.min,n.max),n.semActs?new o(c,n.semActs):c}if("OneOf"===n.type)return c=l(new s(n.expressions.map((function(t){return e(t,p)}))),n.min,n.max),n.semActs?new o(c,n.semActs):c;if("EachOf"===n.type)return c=l(new a(n.expressions.map((function(t){return e(t,p)}))),n.min,n.max),n.semActs?new o(c,n.semActs):c;throw Error("unexpected expr type: "+n.type)}(e,n):new r}var x=function(){function e(e){return i.isLiteral(e)?-1!==["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#float","http://www.w3.org/2001/XMLSchema#double"].indexOf(i.getLiteralType(e))?parseInt(i.getLiteralValue(e)):e:i.isBlank(e)?e:"<"+e+">"}return e(this.subject)+" "+e(this.predicate)+" "+e(this.object)+" ."};function S(e){return{byPredicate:e.reduce((function(e,t){var n=t.predicate;return n in e||(e[n]=[]),e[n].push(t),r&&(t.toString=x),e}),{}),candidates:b(e.length).map((function(){return[]})),misses:[]}}function E(e,t){var[n,r]=[e,t].map(e=>i.isBlank(e)?1:i.isLiteral(e)?2:3);return n===r?e.localeCompare(t):n-r}function b(e){return 0===e?[]:Array(e).join(" ").split(/ /)}function w(e,t,n){t in e||L("expected "+JSON.stringify(e)+" to have a '"+t+"' attribute."),arguments.length>2&&e[t]!==n&&L("expected "+t+" attribute '"+e[t]+"' to equal '"+n+"'.")}function O(){}function L(){var e=Array.prototype.join.call(arguments,""),t=new Error(e);throw Error.captureStackTrace(t,L),t}return{construct:function t(p,h){if(!(this instanceof t))return new t(p,h);let x=p._index||s.index(p);this.type="ShExValidator",h=h||{},this.options=h,this.options.or=this.options.or||"someOf",this.options.partition=this.options.partition||"exhaustive","noCache"in h&&h.noCache||(this.known={});var N=this;this.schema=p,this._expect=this.options.lax?O:w,this._optimize={},this.reset=function(){};var A=this.options.regexModule||n(5);this.getAST=function(){return{type:"AST",shapes:p.shapes.reduce((function(e,t){return e[t.id]={type:"ASTshape",expression:y(t.expression,[],N.schema)},e}),{})}},this.indexTripleConstraints=function(e){var t=[];return e&&function e(n){"string"==typeof n?e(x.tripleExprs[n]):"TripleConstraint"===n.type?t.push(n):"OneOf"===n.type||"EachOf"===n.type?n.expressions.forEach((function(t){e(t)})):L("unexpected expr type: "+n.type)}(e),t},this.emptyTracker=function(){var e=e=>e;return{recurse:e,known:e,enter:function(e,t){++this.depth},exit:function(e,t,n){--this.depth},depth:0}},this.validate=function(t,n,r,s,a){if("object"==typeof n&&"termType"in n&&(n=i.internalTerm(n)),"object"==typeof n){var o=n;if("api"===this.options.results)return o.map(e=>{var n=new Date,i=this.validate(t,e.node,e.shape,r,s);return n=new Date-n,{node:e.node,shape:e.shape,status:"errors"in i?"nonconformant":"conformant",appinfo:i,elapsed:n}});var u=o.reduce((e,n)=>{var i=this.validate(t,n.node,n.shape,r,s);return"errors"in i?{passes:e.passes,failures:e.failures.concat(i)}:{passes:e.passes.concat(i),failures:e.failures}},{passes:[],failures:[]});return u.failures.length?1!==u.failures.length?{type:"FailureList",errors:u.failures}:u.failures[0]:1!==u.passes.length?{type:"SolutionList",solutions:u.passes}:u.passes[0]}var c=void 0===s;s||(s=this.emptyTracker()),r&&r!==e||p.start||L("start production not defined");var l=null;r==e?l=p.start:"shapes"in this.schema&&0!==this.schema.shapes.length?r in x.shapeExprs?l=x.shapeExprs[r]:L("shape "+r+" not found in:\n"+Object.keys(x.shapeExprs||[]).map(e=>"  "+e).join("\n")):L("shape "+r+" not found; no shapes in schema"),void 0===a&&(a={});var h=n+"@"+(r===e?"_: -start-":r);if(h in a)return s.recurse({type:"Recursion",node:g(n),shape:r});if("known"in this&&h in this.known)return s.known(this.known[h]);a[h]={point:n,shape:r},s.enter(n,r);var f=this._validateShapeExpr(t,n,l,r,s,a);return s.exit(n,r,f),delete a[h],"known"in this&&(this.known[h]=f),"startActs"in p&&c&&(f.startActs=p.startActs),f},this._validateShapeExpr=function(e,t,n,r,i,s){if(""===t)throw Error("validation needs a valid focus node");if("string"==typeof n)return this._validateShapeExpr(e,t,x.shapeExprs[n],n,i,s);if("NodeConstraint"===n.type)return(a=this._errorsMatchingNodeConstraint(t,n,null)).length?{type:"Failure",node:g(t),shape:r,errors:a.map((function(e){return{type:"NodeConstraintViolation",shapeExpr:n,error:e}}))}:{type:"NodeTest",node:g(t),shape:r,shapeExpr:n};if("Shape"===n.type)return this._validateShape(e,t,A.compile(p,n,x),n,r,i,s);if("ShapeExternal"===n.type)return this.options.validateExtern(e,t,r,i,s);if("ShapeOr"===n.type){for(var a=[],o=0;o<n.shapeExprs.length;++o){var u=n.shapeExprs[o];if(!("errors"in(l=this._validateShapeExpr(e,t,u,r,i,s))))return{type:"ShapeOrResults",solution:l};a.push(l)}return{type:"ShapeOrFailure",errors:a}}if("ShapeNot"===n.type)return"errors"in(l=this._validateShapeExpr(e,t,n.shapeExpr,r,i,s))?{type:"ShapeNotResults",solution:l}:{type:"ShapeNotFailure",errors:l};if("ShapeAnd"===n.type){var c=[];for(a=[],o=0;o<n.shapeExprs.length;++o){var l;u=n.shapeExprs[o];"errors"in(l=this._validateShapeExpr(e,t,u,r,i,s))?a.push(l):c.push(l)}return a.length>0?{type:"ShapeAndFailure",errors:a}:{type:"ShapeAndResults",solutions:c}}throw Error("expected one of Shape{Ref,And,Or} or NodeConstraint, got "+JSON.stringify(n))},this._validateShape=function(e,t,n,i,s,a,o){var u=this,c=null;if("startActs"in p){const e=this.semActHandler.dispatchAll(p.startActs,null,{});if(e.length)return{type:"Failure",node:g(t),shape:s,errors:e}}for(var l,h=e.getNeighborhood(t,s,i),f=S(h.outgoing.sort((e,t)=>E(e.object,t.object))),d=S(h.incoming.sort((e,t)=>E(e.subject,t.subject))),v=h.outgoing.length,m=h.outgoing.concat(h.incoming),y=this.indexTripleConstraints(i.expression),x=y.reduce((function(t,n,r){n.inverse,n.inverse;var i=(n.inverse?d:f).byPredicate[n.predicate]||[];var p=u._triplesMatchingShapeExpr(i,n.valueExpr,n.inverse,(function(t,n){var r=u.validate(e,t,n,a,o);return"errors"in r?r.errors:[]}),(function(t,n){var r=u._validateShapeExpr(e,t,n,s,a,o);return"errors"in r?r.errors:[]}));return p.hits.forEach((function(e){t.constraintList[m.indexOf(e)].push(r)})),p.misses.forEach((function(e){t.misses[m.indexOf(e.triple)]={constraintNo:r,errors:e.errors}})),t}),{misses:{},constraintList:b(m.length).map((function(){return[]}))}),w=[],O=x.constraintList.reduce((function(e,t,n){return 0===t.length&&n<v&&n in x.misses&&(void 0!==i.extra&&-1!==i.extra.indexOf(m[n].predicate)?w.push(n):e.push({tripleNo:n,constraintNo:x.misses[n].constraintNo,errors:x.misses[n].errors})),e}),[]),L=function(e){var t=e.length,n=[],r=null;function i(){r=[];for(var i=0;i<t;i++)n[i]=0,r[i]=e[i][0]}function s(){if(null!==r&&0===r.length)return!1;if(null===r)return i(),!0;var s=t-1;if(n[s]++,n[s]<e[s].length)return r[s]=e[s][n[s]],!0;for(;n[s]>=e[s].length;){if(0==s)return!1;n[s]=0,r[s]=e[s][0],n[--s]++}return r[s]=e[s][n[s]],!0}return{next:s,do:function(e,t){return e.apply(t,r)},get:function(){return r}}}(x.constraintList),N=[];(0===O.length||"greedy"!==this.options.partition)&&L.next()&&null===c;){var A=[],T=b(m.length).map((function(){return 0})),j=L.get();if(i.closed){var _=m.slice(0,v).filter((e,t)=>void 0===j[t]&&-1===w.indexOf(t));if(_.length>0){N.push({errors:[{type:"ClosedShapeViolation",unexpectedTriples:_}]});continue}}function k(t,n){return u.validate(e,t,n,a,o)}function I(t,n){return u._validateShapeExpr(e,t,n,s,a,o)}function C(e,t,n,r){return u._errorsMatchingShapeExpr(e,t,n,r)}j.forEach((function(e,t){void 0!==e&&(A.push(m[t]),++T[e])})),j.slice().sort((function(e,t){return e-t})).filter((function(e){return void 0!==e})).map((function(e){return e+" "})).join("");var R=n.match(e,t,y,(l=void 0,l=y.length,j.slice().reduce((function(e,t,n){return void 0!==t&&e[t].push(n),e}),b(l).map((function(){return[]})))),j,m,k,I,this.semActHandler,C,null);if("errors"in R){if(N.push({errors:R.errors}),"exhaustive"!==u.options.partition)break}else{var M={type:"ShapeTest",node:g(t),shape:s};if(Object.keys(R).length>0&&(M.solution=R),"semActs"in i){const e=this.semActHandler.dispatchAll(i.semActs,R,M);if(e.length){if(N.push({errors:e}),"exhaustive"!==u.options.partition)break;continue}}c=M,N=[]}}let V=O.map((function(e){var t=m[e.tripleNo];return{type:"TypeMismatch",triple:{type:"TestedTriple",subject:t.subject,predicate:t.predicate,object:g(t.object)},constraint:y[e.constraintNo],errors:e.errors}})).concat(1===N.length?N[0].errors:N);return V.length>0&&(c={type:"Failure",node:g(t),shape:s,errors:V}),r&&m.forEach((function(e){delete e.toString})),function(e){"annotations"in i&&(e.annotations=i.annotations);return e}(c)},this._triplesMatchingShapeExpr=function(e,t,n,r,i){var s=this,a=[],o=[];return e.forEach((function(e){var u=n?e.subject:e.object,p=void 0===t?[]:s._errorsMatchingShapeExpr(u,t,r,i);0===p.length?o.push(e):-1===o.indexOf(e)&&a.push({triple:e,errors:p})})),{hits:o,misses:a}},this._errorsMatchingShapeExpr=function(e,t,n,r){var i=this;if("string"==typeof t)return n?n(e,t):[];if("NodeConstraint"===t.type)return this._errorsMatchingNodeConstraint(e,t,null);if("Shape"===t.type)return void 0===r?[]:r(e,t);if("ShapeOr"===t.type){for(var s=[],a=0;a<t.shapeExprs.length;++a){var o=i._errorsMatchingShapeExpr(e,t.shapeExprs[a],n,r);if(0===o.length)return o;s=s.concat(o)}return s}if("ShapeAnd"===t.type)return t.shapeExprs.reduce((function(t,s,a){return t.concat(i._errorsMatchingShapeExpr(e,s,n,r,!0))}),[]);if("ShapeNot"===t.type)return(s=i._errorsMatchingShapeExpr(e,t.shapeExpr,n,r,!0)).length?[]:["Error validating "+e+" as "+JSON.stringify(t)+": expected NOT to pass"];throw Error("unknown value expression type '"+t.type+"'")},this._errorsMatchingNodeConstraint=function(e,t,n){var r=[],s=i.isLiteral(e)?i.getLiteralValue(e):i.isBlank(e)?e.substring(2):e,p=i.isLiteral(e)?i.getLiteralType(e):null,h=-1!==u.indexOf(p)?o+"integer":-1!==c.indexOf(p)?p:void 0;function y(){var n=Array.prototype.join.call(arguments,"");return r.push("Error validating "+e+" as "+JSON.stringify(t)+": "+n),!1}if("nodeKind"in t&&(-1===["iri","bnode","literal","nonliteral"].indexOf(t.nodeKind)&&y("unknown node kind '"+t.nodeKind+"'"),i.isBlank(e)?"iri"!==t.nodeKind&&"literal"!==t.nodeKind||y("blank node found when "+t.nodeKind+" expected"):i.isLiteral(e)?"literal"!==t.nodeKind&&y("literal found when "+t.nodeKind+" expected"):"bnode"!==t.nodeKind&&"literal"!==t.nodeKind||y("iri found when "+t.nodeKind+" expected")),t.datatype&&t.values&&y("found both datatype and values in "+tripleConstraint),t.datatype&&(i.isLiteral(e)?i.getLiteralType(e)!==t.datatype?y("mismatched datatype: "+i.getLiteralType(e)+" !== "+t.datatype):h?testRange(l[h](s,y),t.datatype,y):t.datatype===o+"boolean"?"true"!==s&&"false"!==s&&"1"!==s&&"0"!==s&&y("illegal boolean value: "+s):t.datatype===o+"dateTime"&&(s.match(/^[+-]?\d{4}-[01]\d-[0-3]\dT[0-5]\d:[0-5]\d:[0-5]\d(\.\d+)?([+-][0-2]\d:[0-5]\d|Z)?$/)||y("illegal dateTime value: "+s)):y("mismatched datatype: "+e+" is not a literal with datatype "+t.datatype)),t.values&&(i.isLiteral(e)&&t.values.reduce((t,n)=>{if(t)return!0;var r=g(e);return"Language"===n.type?n.languageTag===r.language:"object"==typeof n&&"value"in n&&(n.value===r.value&&n.type===r.type&&n.language===r.language)},!1)||-1!==t.values.indexOf(e)||t.values.some((function(t){if("object"==typeof t&&!("value"in t)){"type"in t||L("expected "+JSON.stringify(t)+" to have a 'type' attribute.");var n=["Language","IriStem","LiteralStem","LanguageStem","IriStemRange","LiteralStemRange","LanguageStemRange"];function r(e,n,r){return i.isLiteral(e)?-1!==["LiteralStem","LiteralStemRange"].indexOf(t.type)?r(i.getLiteralValue(e),n):-1!==["LanguageStem","LanguageStemRange"].indexOf(t.type)?r(i.getLiteralLanguage(e)||null,n):y("literal "+e+" not comparable with non-literal "+n):-1===["IriStem","IriStemRange"].indexOf(t.type)?y("nonliteral "+e+" not comparable with literal "+JSON.stringify(n)):r(e,n)}function s(e,n){return r(e,n,(e,n)=>"LanguageStem"===t.type||"LanguageStemRange"===t.type?null!==e&&(e===n||""===n||"-"===e[n.length]):e.startsWith(n))}if(-1===n.indexOf(t.type)&&L("expected type attribute '"+t.type+"' to be in '"+n+"'."),m(t.stem)){if(!s(e,t.stem))return!1}else w(t.stem,"type","Wildcard");return!t.exclusions||!t.exclusions.some((function(t){if(m(t))return r(e,t,(e,t)=>e===t);"type"in t||L("expected "+JSON.stringify(t)+" to have a 'type' attribute.");var n=["IriStem","LiteralStem","LanguageStem"];return-1===n.indexOf(t.type)&&L("expected type attribute '"+t.type+"' to be in '"+n+"'."),s(e,t.stem)}))}}))||y("value "+e+" not found in set "+JSON.stringify(t.values))),"pattern"in t){var x="flags"in t?new RegExp(t.pattern,t.flags):new RegExp(t.pattern);a(e).match(x)||y("value "+a(e)+" did not match pattern "+t.pattern)}return Object.keys(f).forEach((function(n){n in t&&!f[n](s,t[n])&&y("facet violation: expected "+n+" of "+t[n]+" but got "+e)})),Object.keys(d).forEach((function(n){n in t&&(h?d[n](l[h](s,y),t[n])||y("facet violation: expected "+n+" of "+t[n]+" but got "+e):y("facet violation: numeric facet "+n+" can't apply to "+e))})),Object.keys(v).forEach((function(n){n in t&&(h===o+"integer"||h===o+"decimal"?v[n](""+l[h](s,y),t[n])||y("facet violation: expected "+n+" of "+t[n]+" but got "+e):y("facet violation: numeric facet "+n+" can't apply to "+e))})),r},this.semActHandler={handlers:{},results:{},register:function(e,t){this.handlers[e]=t},dispatchAll:function(e,t,n){var r=this;return e.reduce((function(e,i){if(0===e.length&&i.name in r.handlers){var s="code"in i?i.code:N.options.semActs[i.name],a="extensions"in n&&i.name in n.extensions,o=a?n.extensions[i.name]:{};const u=r.handlers[i.name].dispatch(s,t,o);if("boolean"==typeof u)u||e.push({type:"SemActFailure",errors:[{type:"BooleanSemActFailure",code:s,ctx:t}]});else{if("object"!=typeof u||u.constructor!==Array)throw Error("unsupported response from semantic action handler: "+JSON.stringify(u));u.length>0&&e.push({type:"SemActFailure",errors:u})}return!a&&Object.keys(o).length>0&&("extensions"in n||(n.extensions={}),n.extensions[i.name]=o),e}return e}),[])}}},start:e,options:{or:{oneOf:"exactly one disjunct must pass",someOf:"one or more disjuncts must pass",firstOf:"disjunct evaluation stops after one passes"},partition:{greedy:"each triple constraint consumes all triples matching predicate and object",exhaustive:"search all mappings of triples to triple constriant"}}}}();e.exports=r}).call(this,n(3))},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,p=[],c=!1,l=-1;function h(){c&&u&&(c=!1,u.length?p=u.concat(p):l=-1,p.length&&f())}function f(){if(!c){var e=o(h);c=!0;for(var t=p.length;t;){for(u=p,p=[];++l<t;)u&&u[l].run();l=-1,t=p.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new d(e,t)),1!==p.length||c||o(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){function r(e){return"object"!=typeof e||"value"in e&&Object.keys(e).reduce((e,t)=>!1===e?e:-1!==["value","type","language"].indexOf(t),!0)}function i(e){return"string"==typeof e}function s(){var e={runtimeError:function(e){throw e},visitSchema:function(e){var n={type:"Schema"};return t(e,"type","Schema"),this._maybeSet(e,n,"Schema",["@context","prefixes","base","imports","startActs","start","shapes"],["_base","_prefixes","_index","_sourceMap"]),n},visitPrefixes:function(e){return void 0===e?void 0:(t=e,n=function(e){return e},r={},Object.keys(t).forEach((function(e){r[e]=n(t[e])})),r);var t,n,r},visitIRI:function(e){return e},visitImports:function(e){var t=this;return e.map((function(e){return t.visitIRI(e)}))},visitStartActs:function(e){var t=this;return void 0===e?void 0:e.map((function(e){return t.visitSemAct(e)}))},visitSemActs:function(e){var t=this;if(void 0!==e){var n=[];return Object.keys(e).forEach((function(r){n.push(t.visitSemAct(e[r],r))})),n}},visitSemAct:function(e,n){var r={type:"SemAct"};return t(e,"type","SemAct"),this._maybeSet(e,r,"SemAct",["name","code"]),r},visitShapes:function(e){var t=this;if(void 0!==e)return e.map(e=>t.visitShapeExpr(e))},visitProductions999:function(e){var t=this;if(void 0!==e){var n={};return Object.keys(e).forEach((function(r){n[r]=t.visitExpression(e[r],r)})),n}},visitShapeExpr:function(e,t){if(i(e))return this.visitShapeRef(e);var n="Shape"===e.type?this.visitShape(e,t):"NodeConstraint"===e.type?this.visitNodeConstraint(e,t):"ShapeAnd"===e.type?this.visitShapeAnd(e,t):"ShapeOr"===e.type?this.visitShapeOr(e,t):"ShapeNot"===e.type?this.visitShapeNot(e,t):"ShapeExternal"===e.type?this.visitShapeExternal(e):null;if(null===n)throw Error("unexpected shapeExpr type: "+e.type);return n},_visitShapeGroup:function(e,t){this._testUnknownAttributes(e,["id","shapeExprs"],e.type,this.visitShapeNot);var n=this,r={type:e.type};return"id"in e&&(r.id=e.id),r.shapeExprs=e.shapeExprs.map((function(e){return n.visitShapeExpr(e,t)})),r},visitShapeNot:function(e,t){this._testUnknownAttributes(e,["id","shapeExpr"],"ShapeNot",this.visitShapeNot);var n={type:e.type};return"id"in e&&(n.id=e.id),n.shapeExpr=this.visitShapeExpr(e.shapeExpr,t),n},visitShape:function(e,n){var r={type:"Shape"};return t(e,"type","Shape"),this._maybeSet(e,r,"Shape",["id","closed","expression","extra","semActs","annotations"]),r},visitNodeConstraint:function(e,n){var r={type:"NodeConstraint"};return t(e,"type","NodeConstraint"),this._maybeSet(e,r,"NodeConstraint",["id","nodeKind","datatype","pattern","flags","length","reference","minlength","maxlength","mininclusive","minexclusive","maxinclusive","maxexclusive","totaldigits","fractiondigits","values","annotations","semActs"]),r},visitShapeRef:function(e){if("string"!=typeof e){let t=Exception("visitShapeRef expected a string, not "+JSON.stringify(e));throw console.warn(t),t}return e},visitShapeExternal:function(e){return this._testUnknownAttributes(e,["id"],"ShapeExternal",this.visitShapeNot),Object.assign("id"in e?{id:e.id}:{},{type:"ShapeExternal"})},_visitGroup:function(e,t){var n=this,r=Object.assign("id"in e?{id:null}:{},{type:e.type});return r.expressions=e.expressions.map((function(e){return n.visitExpression(e)})),this._maybeSet(e,r,"expr",["id","min","max","annotations","semActs"],["expressions"])},visitTripleConstraint:function(e){return this._maybeSet(e,Object.assign("id"in e?{id:null}:{},{type:"TripleConstraint"}),"TripleConstraint",["id","inverse","predicate","valueExpr","min","max","annotations","semActs"])},visitExpression:function(e){if("string"==typeof e)return this.visitInclusion(e);var t="TripleConstraint"===e.type?this.visitTripleConstraint(e):"OneOf"===e.type?this.visitOneOf(e):"EachOf"===e.type?this.visitEachOf(e):null;if(null===t)throw Error("unexpected expression type: "+e.type);return t},visitValues:function(e){var t=this;return e.map((function(e){return r(e)||"Language"===e.type?e:t.visitStemRange(e)}))},visitStemRange:function(e){var n=this;"type"in e||n.runtimeError(Error("expected "+JSON.stringify(e)+" to have a 'type' attribute."));var i,s=["IriStem","LiteralStem","LanguageStem","IriStemRange","LiteralStemRange","LanguageStemRange"];return-1===s.indexOf(e.type)&&n.runtimeError(Error("expected type attribute '"+e.type+"' to be in '"+s+"'.")),r(e)?(t(e.stem,"type","Wildcard"),i={type:e.type,stem:{type:"Wildcard"}}):i={type:e.type,stem:e.stem},e.exclusions&&(i.exclusions=e.exclusions.map((function(e){return n.visitExclusion(e)}))),i},visitExclusion:function(e){if(r(e))return e;"type"in e||_Visitor.runtimeError(Error("expected "+JSON.stringify(e)+" to have a 'type' attribute."));var t=["IriStem","LiteralStem","LanguageStem"];return-1===t.indexOf(e.type)&&_Visitor.runtimeError(Error("expected type attribute '"+e.type+"' to be in '"+t+"'.")),{type:e.type,stem:e.stem}},visitInclusion:function(e){if("string"!=typeof e){let t=Exception("visitInclusion expected a string, not "+JSON.stringify(e));throw console.warn(t),t}return e},_maybeSet:function(e,t,n,r,i){var s=this;return this._testUnknownAttributes(e,i?r.concat(i):r,n,this._maybeSet),r.forEach((function(n){var r="visit"+n.charAt(0).toUpperCase()+n.slice(1);if(n in e){var i=s[r];if("function"!=typeof i)throw Error(r+" not found in Visitor");var a=i.call(s,e[n]);void 0!==a&&(t[n]=a)}})),t},_visitValue:function(e){return e},_visitList:function(e){return e.slice()},_testUnknownAttributes:function(e,t,n,r){var i=Object.keys(e).reduce((function(e,n){return"type"!==n&&-1===t.indexOf(n)?e.concat(n):e}),[]);if(i.length>0){var s=Error("unknown propert"+(i.length>1?"ies":"y")+": "+i.map((function(e){return'"'+e+'"'})).join(",")+" in "+n+": "+JSON.stringify(e));throw Error.captureStackTrace(s,r),s}}};return e.visitBase=e.visitStart=e.visitVirtual=e.visitClosed=e["visit@context"]=e._visitValue,e.visitInherit=e.visitExtra=e.visitAnnotations=e._visitList,e.visitInverse=e.visitPredicate=e._visitValue,e.visitName=e.visitId=e.visitCode=e.visitMin=e.visitMax=e._visitValue,e.visitType=e.visitNodeKind=e.visitDatatype=e.visitPattern=e.visitFlags=e.visitLength=e.visitMinlength=e.visitMaxlength=e.visitMininclusive=e.visitMinexclusive=e.visitMaxinclusive=e.visitMaxexclusive=e.visitTotaldigits=e.visitFractiondigits=e._visitValue,e.visitOneOf=e.visitEachOf=e._visitGroup,e.visitShapeAnd=e.visitShapeOr=e._visitShapeGroup,e.visitInclude=e._visitValue,e.visitValueExpr=e.visitShapeExpr,e;function t(e,t,n){t in e||this._error("expected "+JSON.stringify(e)+" to have a ."+t),arguments.length>2&&e[t]!==n&&this._error("expected "+e[e]+" to equal ."+n)}}s.index=function(e){let t={shapeExprs:{},tripleExprs:{}},n=s(),r=n.visitExpression;n.visitExpression=function(e){return"object"==typeof e&&"id"in e&&(t.tripleExprs[e.id]=e),r.call(n,e)};let i=n.visitShapeExpr;return n.visitShapeExpr=n.visitValueExpr=function(e,r){return"object"==typeof e&&"id"in e&&(t.shapeExprs[e.id]=e),i.call(n,e,r)},n.visitSchema(e),t},e.exports=s},function(e,t,n){var r=function(){var e=n(0);function t(e){e||(e={});for(var t,n=1,r=arguments.length;n<r&&(t=arguments[n]||{});n++)for(var i in t)e[i]=t[i];return e}return{name:"eval-threaded-nerr",description:"emulation of regular expression engine with error permutations",compile:function(n,r,i){var s=r.expression;return{match:function(n,a,o,u,p,c,l,h,f,d,v){if(!s)return{};var g=function n(r,s){if("string"==typeof r)return n(i.tripleExprs[r],s);var a=o.indexOf(r),p="min"in r?r.min:1,c="max"in r?-1===r.max?1/0:r.max:1;function l(e,n){var i=0,a=[s],o={};("min"in r&&1!==r.min||"max"in r&&1!==r.max)&&(o.min=r.min,o.max=r.max),"semActs"in r&&(o.semActs=r.semActs),"annotations"in r&&(o.annotations=r.annotations);for(;i<c;++i){for(var u=[],l=0;l<a.length;++l){var h=a[l],d=n(h);if(d.length>0&&0===d[0].errors.length&&d.forEach(n=>{var r="expression"in h?h.expression.solutions:[];"solution"in n&&(r=r.concat(n.solution)),delete n.solution,n.expression=t({type:e,solutions:r},o)}),0===d.length||d[0].errors.length>0)return i<p?d:a;u=u.concat(d)}a=u}if(a.length>0&&0===a[0].errors.length&&"semActs"in r){var v=[],g=[];a.forEach(e=>{const t=f.dispatchAll(r.semActs,"???",e);0===t.length?v.push(e):([].push.apply(e.errors,t),g.push(e))}),a=v.length>0?v:g}return a}if("TripleConstraint"===r.type){var h="negated"in r&&r.negated||0===c;h&&(p=c=1/0),void 0===s.avail[a]&&(s.avail[a]=u[a].slice());var d={};("min"in r&&1!==r.min||"max"in r&&1!==r.max)&&(d.min=r.min,d.max=r.max),"semActs"in r&&(d.semActs=r.semActs),"annotations"in r&&(d.annotations=r.annotations);var v=s.avail[a].splice(0,p),g=h?0===v.length:v.length>=p,m=[],y=s.matched;if(g)do{m.push({avail:s.avail.map(e=>e.slice()),errors:s.errors.slice(),matched:y.concat({tNos:v.slice()}),expression:t({type:"TripleConstraintSolutions",predicate:r.predicate,solutions:v.map(e=>({type:"halfTestedTriple",tripleNo:e,constraintNo:a}))},"valueExpr"in r?{valueExpr:r.valueExpr}:{},"productionLabel"in r?{productionLabel:r.productionLabel}:{},d)})}while(s.avail[a].length>0&&v.length<c&&(v.push(s.avail[a].shift()),1));else{var x=null;"string"==typeof r.valueExpr?(x=r.valueExpr,e.isBlank(x)&&(x=i.shapeExprs[x])):r.valueExpr&&(x=t({},r.valueExpr)),m.push({avail:s.avail,errors:s.errors.concat([t({type:h?"NegatedProperty":"MissingProperty",property:r.predicate},x?{valueExpr:x}:{})]),matched:y})}return m}return"OneOf"===r.type?l("OneOfSolutions",e=>{var t=[],i=[];return r.expressions.forEach(r=>{var s={avail:e.avail.map(e=>e.slice()),errors:e.errors,matched:e.matched},a=n(r,s);0===a[0].errors.length?(t=t.concat(a),a.forEach(e=>{var t="solution"in s?s.solution.expressions:[];"expression"in e&&(t=t.concat([e.expression])),delete e.expression,e.solution={type:"OneOfSolution",expressions:t}})):i=i.concat(a)}),t.length>0?t:i}):"EachOf"===r.type?l("EachOfSolutions",e=>r.expressions.reduce((e,t)=>e.reduce((e,r)=>{var i=n(t,r);return i.forEach(e=>{if(0===e.errors.length){var t="solution"in r?r.solution.expressions:[];"expression"in e&&(t=t.concat([e.expression])),delete e.expression,e.solution={type:"EachOfSolution",expressions:t}}}),e.concat(i)},[]),[e])):void runtimeError("unexpected expr type: "+r.type)}(s,{avail:[],matched:[],errors:[]}),m=g.reduce((e,t)=>{if(t.errors.length>0)return e;var n={};return Object.keys(p).forEach(e=>{void 0!==p[e]&&(n[e]=p[e])}),t.matched.forEach(e=>{e.tNos.forEach(e=>{delete n[e]})}),Object.keys(n).forEach(e=>{t.errors.push({type:"ExcessTripleViolation",triple:c[e],constraint:o[n[e]]})}),null!==e?e:Object.keys(n).length>0?null:t},null);return null!==m?function(t,n,i,s,a,o,u){function p(c){function l(t){if('"'!==t[0])return t;var n={value:e.getLiteralValue(t)},r=e.getLiteralType(t);r&&"http://www.w3.org/2001/XMLSchema#string"!==r&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==r&&(n.type=r);var i=e.getLiteralLanguage(t);return i&&(n.language=i),n}if("OneOfSolutions"===c.type||"EachOfSolutions"===c.type)c.solutions.forEach(e=>{e.expressions.forEach(e=>{p(e)})});else{if("TripleConstraintSolutions"!==c.type)throw Error("unexpected expr type in "+JSON.stringify(c));c.solutions=c.solutions.map(p=>{if("TestedTriple"===p.type)return p;var c=i[p.tripleNo],h=n[p.constraintNo],f={type:"TestedTriple",subject:c.subject,predicate:c.predicate,object:l(c.object)};function d(t,n,i){var s=i(t,n);if("errors"in s){var a={type:"ReferenceError",focus:t,shape:n};return"string"==typeof n&&e.isBlank(n)&&(a.referencedShape=r),a.errors=s,[a]}return(("solution"in s||"solutions"in s)&&0!==Object.keys(s.solution||s.solutions).length||"Recursion"===s.type)&&(f.referenced=s),[]}function v(e,t){return d(e,t,s)}function g(e,t){return d(e,t,a)}var m="valueExpr"in h?u(h.inverse?c.subject:c.object,h.valueExpr,v,g):[];return 0===m.length&&"semActs"in h&&[].push.apply(m,o.dispatchAll(h.semActs,c,f)),m.length>0&&(t.errors=t.errors||[],t.errors=t.errors.concat(m)),f})}}Object.keys(t).length>0&&p(t);"semActs"in r&&(t.semActs=r.semActs);return t}(m.expression,o,c,l,h,f,d):g.length>1?{type:"PossibleErrors",errors:g.reduce((e,t)=>e.concat([t.errors]),[])}:g[0]}}}}}();e.exports=r}]);